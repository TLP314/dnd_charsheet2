<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic D&D 5e Character Sheet V5.1</title> <!-- Version bump -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="save-load-controls">
        <button id="save-button">Save Character (Download)</button>
        <label for="load-file" class="load-button-label">Load Character (Upload)</label>
        <input type="file" id="load-file" accept=".json" style="display: none;">
        <button id="print-button">Print Sheet</button>
    </div>

    <form id="character-sheet">
        <!-- Page 1 -->
        <div class="page page-1">
            <header class="main-header">
                <!-- ... (header content unchanged) ... -->
                <div class="char-name section"><label for="charname">Character Name</label><input type="text" id="charname" name="charname"></div>
                <div class="char-info-multi"><div class="info-box level-box"><label for="level">Level</label><input type="number" id="level" name="level" min="1" max="20" value="1"></div><div class="info-box"><label for="classlevel">Class</label><input type="text" id="classlevel" name="classlevel"></div><div class="info-box"><label for="background">Background</label><input type="text" id="background" name="background"></div><div class="info-box"><label for="xp">XP</label><input type="number" id="xp" name="xp" value="0" min="0"></div><div class="info-box"><label for="species">Species</label><input type="text" id="species" name="species"></div><div class="info-box"><label for="subclass">Subclass</label><input type="text" id="subclass" name="subclass"></div></div>
            </header>

            <div class="stats-container">
                <!-- Left Column (Unchanged) -->
                <div class="left-column">
                     <div class="proficiency-bonus-box stat-box"><div class="calculated-field" id="proficiency-bonus">+2</div><label>PROFICIENCY BONUS</label></div>
                     <div class="abilities">
                        <div class="ability-box" id="str-box"><label>STRENGTH</label><div class="score-mod-container"><input type="number" class="ability-score" id="str-score" name="str_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="str-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="str-save-prof" name="str_save_prof"><span class="calculated-value save-value" id="str-save-value">+0</span><label for="str-save-prof">Saving Throw</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="athletics-prof" name="athletics_prof" data-ability="str"><span class="calculated-value skill-value" id="athletics-value">+0</span><label for="athletics-prof">Athletics</label></div></div></div>
                        <div class="ability-box" id="dex-box"><label>DEXTERITY</label><div class="score-mod-container"><input type="number" class="ability-score" id="dex-score" name="dex_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="dex-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="dex-save-prof" name="dex_save_prof"><span class="calculated-value save-value" id="dex-save-value">+0</span><label for="dex-save-prof">Saving Throw</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="acrobatics-prof" name="acrobatics_prof" data-ability="dex"><span class="calculated-value skill-value" id="acrobatics-value">+0</span><label for="acrobatics-prof">Acrobatics</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="sleight-of-hand-prof" name="sleight_of_hand_prof" data-ability="dex"><span class="calculated-value skill-value" id="sleight-of-hand-value">+0</span><label for="sleight-of-hand-prof">Sleight of Hand</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="stealth-prof" name="stealth_prof" data-ability="dex"><span class="calculated-value skill-value" id="stealth-value">+0</span><label for="stealth-prof">Stealth</label></div></div></div>
                        <div class="ability-box" id="con-box"><label>CONSTITUTION</label><div class="score-mod-container"><input type="number" class="ability-score" id="con-score" name="con_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="con-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="con-save-prof" name="con_save_prof"><span class="calculated-value save-value" id="con-save-value">+0</span><label for="con-save-prof">Saving Throw</label></div></div></div>
                     </div>
                     <div class="inspiration-box section"><label for="inspiration">HEROIC INSPIRATION</label><input type="checkbox" id="inspiration" name="inspiration"></div>
                     <div class="proficiencies-box section"><label>EQUIPMENT TRAINING & PROFICIENCIES</label><div class="armor-training-list"><label class="armor-label">ARMOR TRAINING:</label><div><input type="checkbox" id="prof-light-armor" name="prof_light_armor"><label for="prof-light-armor">Light</label></div><div><input type="checkbox" id="prof-medium-armor" name="prof_medium_armor"><label for="prof-medium-armor">Medium</label></div><div><input type="checkbox" id="prof-heavy-armor" name="prof_heavy_armor"><label for="prof-heavy-armor">Heavy</label></div><div><input type="checkbox" id="prof-shields" name="prof_shields"><label for="prof-shields">Shields</label></div></div><label for="prof-weapons">WEAPONS</label><textarea id="prof-weapons" name="prof_weapons" rows="3"></textarea><label for="prof-tools">TOOLS</label><textarea id="prof-tools" name="prof_tools" rows="3"></textarea></div>
                </div>

                <!-- Center Column (Unchanged) -->
                <div class="center-column">
                     <div class="abilities">
                        <div class="ability-box" id="int-box"><label>INTELLIGENCE</label><div class="score-mod-container"><input type="number" class="ability-score" id="int-score" name="int_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="int-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="int-save-prof" name="int_save_prof"><span class="calculated-value save-value" id="int-save-value">+0</span><label for="int-save-prof">Saving Throw</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="arcana-prof" name="arcana_prof" data-ability="int"><span class="calculated-value skill-value" id="arcana-value">+0</span><label for="arcana-prof">Arcana</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="history-prof" name="history_prof" data-ability="int"><span class="calculated-value skill-value" id="history-value">+0</span><label for="history-prof">History</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="investigation-prof" name="investigation_prof" data-ability="int"><span class="calculated-value skill-value" id="investigation-value">+0</span><label for="investigation-prof">Investigation</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="nature-prof" name="nature_prof" data-ability="int"><span class="calculated-value skill-value" id="nature-value">+0</span><label for="nature-prof">Nature</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="religion-prof" name="religion_prof" data-ability="int"><span class="calculated-value skill-value" id="religion-value">+0</span><label for="religion-prof">Religion</label></div></div></div>
                        <div class="ability-box" id="wis-box"><label>WISDOM</label><div class="score-mod-container"><input type="number" class="ability-score" id="wis-score" name="wis_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="wis-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="wis-save-prof" name="wis_save_prof"><span class="calculated-value save-value" id="wis-save-value">+0</span><label for="wis-save-prof">Saving Throw</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="animal-handling-prof" name="animal_handling_prof" data-ability="wis"><span class="calculated-value skill-value" id="animal-handling-value">+0</span><label for="animal-handling-prof">Animal Handling</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="insight-prof" name="insight_prof" data-ability="wis"><span class="calculated-value skill-value" id="insight-value">+0</span><label for="insight-prof">Insight</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="medicine-prof" name="medicine_prof" data-ability="wis"><span class="calculated-value skill-value" id="medicine-value">+0</span><label for="medicine-prof">Medicine</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="perception-prof" name="perception_prof" data-ability="wis"><span class="calculated-value skill-value" id="perception-value">+0</span><label for="perception-prof">Perception</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="survival-prof" name="survival_prof" data-ability="wis"><span class="calculated-value skill-value" id="survival-value">+0</span><label for="survival-prof">Survival</label></div></div></div>
                        <div class="ability-box" id="cha-box"><label>CHARISMA</label><div class="score-mod-container"><input type="number" class="ability-score" id="cha-score" name="cha_score" value="10" min="1" max="30"><div class="ability-mod calculated-value" id="cha-mod">+0</div></div><div class="saves-skills-container"><div class="saving-throw"><input type="checkbox" class="prof-toggle save-prof" id="cha-save-prof" name="cha_save_prof"><span class="calculated-value save-value" id="cha-save-value">+0</span><label for="cha-save-prof">Saving Throw</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="deception-prof" name="deception_prof" data-ability="cha"><span class="calculated-value skill-value" id="deception-value">+0</span><label for="deception-prof">Deception</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="intimidation-prof" name="intimidation_prof" data-ability="cha"><span class="calculated-value skill-value" id="intimidation-value">+0</span><label for="intimidation-prof">Intimidation</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="performance-prof" name="performance_prof" data-ability="cha"><span class="calculated-value skill-value" id="performance-value">+0</span><label for="performance-prof">Performance</label></div><div class="skill"><input type="checkbox" class="prof-toggle skill-prof" id="persuasion-prof" name="persuasion_prof" data-ability="cha"><span class="calculated-value skill-value" id="persuasion-value">+0</span><label for="persuasion-prof">Persuasion</label></div></div></div>
                     </div>
                </div>

                <!-- Right Column (Unchanged except button order in headers) -->
                <div class="right-column">
                     <div class="top-combat-stats"> <div class="ac-box stat-box"><input type="number" id="ac" name="ac" value="10"><label for="ac">ARMOR CLASS</label></div> <div class="initiative-box stat-box"><div class="calculated-field" id="initiative">+0</div><label>INITIATIVE</label></div> <div class="speed-box stat-box"><input type="number" id="speed-base" name="speed_base" value="30"><label for="speed-base">SPEED</label></div> </div>
                     <div class="mid-combat-stats"> <div class="passive-perception-box stat-box"><div class="calculated-field" id="passive-perception">10</div><label>PASSIVE PERCEPTION</label></div> <div class="size-box stat-box"><input type="text" id="size" name="size" value="Medium"><label for="size">SIZE</label></div> </div>
                    <div class="hp-box section"> <label>HIT POINTS</label> <div class="hp-values"> <div class="hp-current"> <label for="hp-current">Current</label> <input type="number" id="hp-current" name="hp_current" value="10"> </div> <div class="hp-max"> <label for="hp-max">Max</label> <input type="number" id="hp-max" name="hp_max" value="10"> </div> <div class="hp-temp"> <label for="hp-temp">Temp</label> <input type="number" id="hp-temp" name="hp_temp" value="0"> </div> <div class="hp-total"> <label>Total</label> <div id="hp-total-display" class="calculated-field">10</div> </div> </div> </div>
                     <div class="hd-ds-box section"> <div class="hit-dice-area"><label>HIT DICE</label><div class="hd-inputs"><div class="hd-total"><label for="hd-total">Max</label><input type="text" id="hd-total" name="hd_total" placeholder="e.g., 1d8"></div><div class="hd-spent"><label for="hd-spent">Spent</label><input type="number" id="hd-spent" name="hd_spent" value="0" min="0"></div></div></div> <div class="death-saves-area"><label>DEATH SAVES</label><div class="ds-checks"><div class="ds-successes"><span>SUCCESSES</span><input type="checkbox" id="ds-succ-1" name="ds_succ_1"><input type="checkbox" id="ds-succ-2" name="ds_succ_2"><input type="checkbox" id="ds-succ-3" name="ds_succ_3"></div><div class="ds-failures"><span>FAILURES</span><input type="checkbox" id="ds-fail-1" name="ds_fail_1"><input type="checkbox" id="ds-fail-2" name="ds_fail_2"><input type="checkbox" id="ds-fail-3" name="ds_fail_3"></div></div></div> </div>

                    <div class="attacks-spellcasting section">
                         <!-- *** CHANGE: Moved Button After Label *** -->
                         <div class="attacks-header dynamic-list-header">
                            <label>WEAPONS & DAMAGE CANTRIPS</label>
                            <button type="button" id="add-weapon-button" class="action-button add-button">+</button>
                         </div>
                         <div class="attacks-table">
                            <div class="attack-table-header"><span>Name</span><span>Atk Bonus / DC</span><span>Damage & Type</span><span class="notes-header">Notes</span><span></span></div>
                            <div id="weapons-list-content">
                                <div class="attack-row" data-weapon-index="0"><input type="text" class="weapon-input" name="attack_name_0"><input type="text" class="weapon-input" name="attack_bonus_0"><input type="text" class="weapon-input" name="attack_damage_0"><input type="text" class="weapon-input notes-input" name="attack_notes_0"><button type="button" class="action-button remove-button remove-weapon-row-button">-</button></div>
                            </div>
                         </div>
                         <textarea id="attacks-notes" name="attacks_notes" rows="3" placeholder="Additional attack/cantrip notes..."></textarea>
                    </div>

                    <div class="items-section section">
                        <!-- *** CHANGE: Moved Button After Label *** -->
                        <div class="items-header dynamic-list-header">
                            <label>ITEMS</label>
                            <button type="button" id="add-item-button" class="action-button add-button">+</button>
                        </div>
                        <div class="items-table">
                            <div class="item-table-header"> <span>Name</span> <span class="count-header">Count</span> <span class="notes-header">Notes</span> <span></span> </div>
                            <div id="items-list-content">
                                <div class="item-row" data-item-index="0"> <input type="text" class="item-input item-name" name="item_name_0" placeholder="Item Name"> <input type="number" class="item-input item-count" name="item_count_0" value="1" min="0"> <input type="text" class="item-input item-notes notes-input" name="item_notes_0" placeholder="Item Notes (weight, details...)"> <button type="button" class="action-button remove-button remove-item-row-button">-</button> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bottom-section"> <!-- Unchanged -->
                 <div class="class-features section"><label for="class-features">CLASS FEATURES</label><textarea id="class-features" name="class_features" rows="10"></textarea></div>
                 <div class="species-traits section"><label for="species-traits">SPECIES TRAITS</label><textarea id="species-traits" name="species_traits" rows="10"></textarea></div>
                 <div class="feats section"><label for="feats">FEATS</label><textarea id="feats" name="feats" rows="10"></textarea></div>
            </div>
        </div>

        <!-- Page 2 -->
        <div class="page page-2">
             <div class="page2-left-column"> <!-- Unchanged -->
                 <div class="spellcasting-info section"> <div class="spell-stat"><label for="spellcasting-ability">SPELLCASTING ABILITY</label><select id="spellcasting-ability" name="spellcasting_ability"><option value="none">None</option><option value="str">STR</option><option value="dex">DEX</option><option value="con">CON</option><option value="int">INT</option><option value="wis">WIS</option><option value="cha">CHA</option></select></div> <div class="spell-stat"><div class="calculated-field" id="spellcasting-mod">N/A</div><label>SPELLCASTING MODIFIER</label></div> <div class="spell-stat"><div class="calculated-field" id="spell-save-dc">N/A</div><label>SPELL SAVE DC</label></div> <div class="spell-stat"><div class="calculated-field" id="spell-attack-bonus">N/A</div><label>SPELL ATTACK BONUS</label></div> </div>
                 <div class="spells section">
                    <!-- *** CHANGE: Moved Button After Label *** -->
                    <div class="spells-header dynamic-list-header">
                        <label>CANTRIPS & PREPARED SPELLS</label>
                        <button type="button" id="add-spell-button" class="action-button add-button">+</button>
                    </div>
                    <div class="spell-list-header"><span>Lvl</span><span>Name</span><span>Time</span><span>Range</span><span class="components-header">Components</span><span class="notes-header">Notes</span><span></span></div>
                    <div id="spell-list-content"> <div class="spell-row" data-spell-index="0"> <input type="text" class="spell-input spell-level" name="spell_level_0" value="0"> <input type="text" class="spell-input spell-name" name="spell_name_0" placeholder="Cantrip Name"> <input type="text" class="spell-input spell-time" name="spell_time_0"> <input type="text" class="spell-input spell-range" name="spell_range_0"> <div class="spell-components"> <input type="checkbox" id="spell_comp_v_0" name="spell_comp_v_0"><label for="spell_comp_v_0">V</label> <input type="checkbox" id="spell_comp_s_0" name="spell_comp_s_0"><label for="spell_comp_s_0">S</label> <input type="checkbox" id="spell_comp_m_0" name="spell_comp_m_0"><label for="spell_comp_m_0">M</label> </div> <input type="text" class="spell-input spell-notes notes-input" name="spell_notes_0"> <button type="button" class="action-button remove-button remove-spell-row-button">-</button> </div> </div>
                 </div>
            </div>

            <div class="page2-right-column"> <!-- Unchanged -->
                  <div class="spell-slots section"> <label>SPELL SLOTS</label> <div class="spell-slots-grid-5x2"> <script>/* Script generates slots */ const spellSlotsGrid = document.querySelector('.spell-slots-grid-5x2'); const slotMaxValues = { 1: 4, 2: 3, 3: 3, 4: 3, 5: 3, 6: 2, 7: 2, 8: 1, 9: 1 }; if (spellSlotsGrid) { for (let i = 1; i <= 9; i++) { const maxSlots = slotMaxValues[i] !== undefined ? slotMaxValues[i] : 0; spellSlotsGrid.innerHTML += `<div class="spell-slot-level" id="spell-slots-level-${i}" data-level="${i}"><label class="slot-level-label">LEVEL ${i}</label><div class="slot-total"><label for="slots-total-${i}">Total</label><input type="number" id="slots-total-${i}" name="slots_total_${i}" class="slot-total-input" value="0" min="0" max="${maxSlots}"></div><div class="slot-visual" id="slot-visual-${i}"></div></div>`; } } else { console.error("Could not find '.spell-slots-grid-5x2' container"); } </script> </div> </div>
                  <div class="coins-attunement-container"> <div class="coins-section section"> <label>COINS</label> <div class="coins coins-grid"> <div class="coin-column"> <label for="cp">CP</label> <input type="number" id="cp" name="cp" value="0" min="0"> </div> <div class="coin-column"> <label for="sp">SP</label> <input type="number" id="sp" name="sp" value="0" min="0"> </div> <div class="coin-column"> <label for="ep">EP</label> <input type="number" id="ep" name="ep" value="0" min="0"> </div> <div class="coin-column"> <label for="gp">GP</label> <input type="number" id="gp" name="gp" value="0" min="0"> </div> <div class="coin-column"> <label for="pp">PP</label> <input type="number" id="pp" name="pp" value="0" min="0"> </div> </div> </div> <div class="attunement section"> <label>Magic Item Attunement</label> <div class="attunement-slots"> <input type="text" name="attunement_1" placeholder="Attuned Item 1"> <input type="text" name="attunement_2" placeholder="Attuned Item 2"> <input type="text" name="attunement_3" placeholder="Attuned Item 3"> </div> </div> </div>
                  <div class="appearance section"><label for="appearance">APPEARANCE</label><textarea id="appearance" name="appearance" rows="6"></textarea></div>
                  <div class="backstory section"><label for="backstory">BACKSTORY & PERSONALITY</label><textarea id="backstory" name="backstory" rows="8"></textarea><label for="alignment">Alignment</label><input type="text" id="alignment" name="alignment"></div>
                  <div class="languages section"><label for="languages">LANGUAGES</label><textarea id="languages" name="languages" rows="3"></textarea></div>
                  <div class="equipment section"><label for="equipment">EQUIPMENT NOTES</label><textarea id="equipment" name="equipment" rows="8"></textarea></div>
            </div>
        </div>
    </form>

    <script src="script.js"></script>
    <footer style="text-align: center;"> Modern DND Character Sheet by Anurag S., Vibe Coded W/ Google Gemini </footer>
</body>
</html>